(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1603:function(t,e,n){"use strict";n.r(e);var o=n(1),d=(n(3),n(172)),r={mounted:function(){this.state=this.detaildemande.state,this.status=this.detaildemande.status},computed:Object(d.b)({detaildemande:"demandes/detaildemande"}),data:function(){var t;return t={state:"",status:"",loadingValidation:!1,loadingRejet:!1,message:null,color:null,valid:!0,selectedItem:0},Object(o.a)(t,"valid",!0),Object(o.a)(t,"model",{motif:""}),Object(o.a)(t,"rules",{nameRules:[function(t){return!!t||"Libelle est obligatoire"},function(t){return t&&t.length<=50||"Prénom doit etre inférieur à 20 caratères"}],descriptionRules:[function(t){return!!t||"Description est obligatoire"}]}),t},methods:{submitForm:function(){alert("Formulaire soumis")},retour:function(){this.$router.push("/demandes")},modifier:function(){this.$router.push("/demandes/modifier/"+this.detaildemande.id)},valider:function(){var t=this;this.loadingValidation=!0,console.log("Donées formulaire ++++++ : ",{id:this.detaildemande.id}),this.$msasApi.post("/validation_demande",{id:this.detaildemande.id}).then((function(e){t.state=e.data.data.state,t.status=e.data.data.status,t.$store.dispatch("toast/getMessage",{type:"success",text:e.data.message||"Validation réussie !"}),t.$router.push("/demandes")})).catch((function(e){console.log("Code error ++++++: ",e),t.$store.dispatch("toast/getMessage",{type:"error",text:e||"Echec de l'ajout "})})).finally((function(){t.loadingValidation=!1,console.log("Requette envoyé ")}))},rejeter:function(){var t=this;this.loadingRejet=!0,console.log("Donées formulaire ++++++ : ",{id:this.detaildemande.id}),this.$msasApi.post("/rejet_demande",{id:this.detaildemande.id,motif_rejet:this.model.motif}).then((function(e){t.state=e.data.data.state,t.status=e.data.data.status,t.$store.dispatch("toast/getMessage",{type:"success",text:e.data.message||"demande rejeté avec succés!"}),t.$router.push("/demandes")})).catch((function(e){console.log("Code error ++++++: ",e),t.$store.dispatch("toast/getMessage",{type:"error",text:e||"Echec de l'ajout "})})).finally((function(){t.loadingRejet=!1,console.log("Requette envoyé ")}))},reinitialiser:function(){alert("Réinitialiser mot de passe")}}},l=n(108),c=n(131),m=n.n(c),f=n(233),h=n(280),v=n(1070),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{align:"center",justify:"space-around"}},[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.retour()}}},[n("v-icon",{attrs:{left:""}},[t._v("\n      mdi-arrow-left\n    ")]),t._v("\n    Retour à la liste\n  ")],1),t._v(" "),"brouillon"==t.detaildemande.status||"rejete"==t.detaildemande.status?n("v-btn",{attrs:{flat:"",outlined:""},on:{click:function(e){return t.modifier()}}},[n("v-icon",{attrs:{left:""}},[t._v("\n      mdi-pencil\n    ")]),t._v("\n    Modifier\n  ")],1):t._e(),t._v(" "),(t.$hasPermission(t.detaildemande.status)||t.$hasRole("admin_structure")&&"non_traite"==t.detaildemande.status)&&t.$hasPermission("validation")?n("v-btn",{attrs:{loading:t.loadingValidation,flat:"",outlined:"",color:"green"},on:{click:function(e){return t.valider()}}},[n("v-icon",{attrs:{left:""}},[t._v("\n      mdi-check\n    ")]),t._v("\n    "+t._s("Traitée")+"\n  ")],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:f.a,VIcon:h.a,VRow:v.a})}}]);